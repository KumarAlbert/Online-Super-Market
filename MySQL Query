CREATE TABLE User(id INT NOT NULL AUTO_INCREMENT,firstName VARCHAR(40) NOT NULL,lastName VARCHAR(40) NOT NULL,email VARCHAR(40) NOT NULL, mobileNumber LONG  NOT NULL,password VARCHAR(20) NOT NULL,address VARCHAR(255) NOT NULL, createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME, PRIMARY KEY ( id ) );


CREATE TABLE Category(id INT NOT NULL AUTO_INCREMENT,name VARCHAR(40) NOT NULL, PRIMARY KEY ( id ), createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME);

CREATE TABLE Subcategory(id INT NOT NULL AUTO_INCREMENT,name VARCHAR(40) NOT NULL,categoryId INT, createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME, PRIMARY KEY ( id ),FOREIGN KEY(categoryId) REFERENCES Category(id)ON UPDATE CASCADE ON DELETE SET NULL);

CREATE TABLE Product(id INT NOT NULL AUTO_INCREMENT,name VARCHAR(40) NOT NULL,description VARCHAR(255) NOT NULL,imageUrl VARCHAR(255),stock INT NOT NULL, subcategoryId INT, createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME, PRIMARY KEY ( id ),FOREIGN KEY(subcategoryId) REFERENCES Subcategory(id) ON UPDATE CASCADE ON DELETE SET NULL);

CREATE TABLE Cart (id INT NOT NULL AUTO_INCREMENT, purchaseOrderId INT , productId INT , quantity INT NOT NULL, total DOUBLE(7,2) NOT NULL, createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME,primary key(id), FOREIGN KEY (purchaseOrderId) REFERENCES PurchaseOrder(id)ON UPDATE CASCADE ON DELETE SET NULL, FOREIGN KEY (productId) REFERENCES Product(id)ON UPDATE CASCADE ON DELETE SET NULL); 


CREATE TABLE Role(id INT NOT NULL AUTO_INCREMENT, name VARCHAR(40), PRIMARY KEY ( id ), createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME);

CREATE TABLE User_Role(userId INT NOT NULL, roleId INT NOT NULL,  PRIMARY KEY (userId, roleId), FOREIGN KEY (userId) REFERENCES User(id), FOREIGN KEY (roleId) REFERENCES Role(id));


CREATE TABLE PurchaseOrder(id INT NOT NULL AUTO_INCREMENT, userId INT, total DOUBLE(7,2) NOT NULL, paymentType VARCHAR(30) NOT NULL, status VARCHAR(10) NOT NULL, createdBy INT NOT NULL, createdAt TIME NOT NULL, modifiedBy INT ,modifiedAt TIME, PRIMARY KEY(id), FOREIGN KEY(userId) REFERENCES User(id)ON UPDATE CASCADE ON DELETE SET NULL);
